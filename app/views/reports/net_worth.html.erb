<% provide(:title, "Net Worth") %>

<div data-controller="filter-sidebar" class="bg-gray-100 rounded-lg shadow-md overflow-hidden flex flex-col h-[calc(100vh-180px)] relative">
  <!-- Header row -->
  <%= render 'reports/report_header', title: 'Net Worth' %>
  
  <!-- Table container with fixed header -->
  <div class="flex-1 overflow-hidden flex flex-col">
    <!-- Fixed table header -->
    <table class="w-full">
      <thead class="bg-gray-50 border-b border-gray-200">
        <tr>
          <th class="px-4 py-2 text-left font-medium text-gray-700">Date</th>
          <th class="px-4 py-2 text-right font-medium text-gray-700">Amount</th>
          <th class="px-4 py-2 text-right font-medium text-gray-700">Running Balance</th>
        </tr>
      </thead>
    </table>
    
    <!-- Scrollable table body -->
    <div class="overflow-y-auto flex-1">
      <table class="w-full bg-white">
        <tbody>
          <% @net_worth_data.each do |date, data| %>
            <tr class="hover:bg-gray-50 border-t border-gray-100">
              <td class="px-4 py-2 text-left"><%= date.strftime("%Y-%m") %></td>
              <td class="px-4 py-2 text-right"><%= number_to_currency(data[:amount] / 100.0, precision: 2) %></td>
              <td class="px-4 py-2 text-right"><%= number_to_currency(data[:running_balance] / 100.0, precision: 2) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<%= render 'reports/filter_sidebar' %>