<% provide(:title, "Net Worth") %>

<div data-controller="filter-sidebar" class="bg-gray-100 rounded-lg shadow-md overflow-hidden flex flex-col h-[calc(100vh-180px)] relative">
  <!-- Header row -->
  <div class="bg-gray-800 py-3 px-4 flex justify-between items-center flex-shrink-0">
    <div class="w-1/3">
      <button id="filter-toggle" class="text-white p-2 rounded hover:bg-gray-700 focus:outline-none">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
    <h1 class="text-white text-xl font-bold w-1/3 text-center">Net Worth</h1>
    <div class="w-1/3 text-right"></div>
  </div>
  
  <!-- Table section with fixed header -->
  <div class="flex-grow flex flex-col">
    <!-- Fixed table header -->
    <div class="bg-gray-50 border-b border-gray-200 sticky top-0 z-10">
      <table class="w-full">
        <thead>
          <tr>
            <th class="px-4 py-2 text-left font-medium text-gray-700">Date</th>
            <th class="px-4 py-2 text-right font-medium text-gray-700">Amount</th>
            <th class="px-4 py-2 text-right font-medium text-gray-700">Running Balance</th>
          </tr>
        </thead>
      </table>
    </div>
    
    <!-- Scrollable table body -->
    <div class="overflow-y-auto">
      <table class="w-full bg-white">
        <tbody>
          <% @net_worth_data.each do |date, data| %>
            <tr class="hover:bg-gray-50 border-t border-gray-100">
              <td class="px-4 py-2 text-left"><%= date.strftime("%Y-%m") %></td>
              <td class="px-4 py-2 text-right"><%= number_to_currency(data[:amount] / 100.0, precision: 2) %></td>
              <td class="px-4 py-2 text-right"><%= number_to_currency(data[:running_balance] / 100.0, precision: 2) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<%= render 'reports/filter_sidebar' %>