<div class="nested-fields">
  <div class="field">
    <%= f.label :amount %>
    <%#= f.text_field :amount %>
    <%#= f.number_field :amount %>
    <%= f.number_field :amount, 
                      value: (BigDecimal(f.object.amount.to_s) / BigDecimal("100")).round(2),
                      step: "0.01" %>
    <%#= f.number_field :amount, 
      value: (BigDecimal(f.object.amount.to_s.presence || "0") / BigDecimal("100")).round(2),
      step: "0.01" %>
    
  </div>

  <div class="field">
    <%= f.label :subcategory_id, "Category" %>
    <%= f.collection_select :subcategory_id, 
                          @current_budget.subcategories.order('categories.name, subcategories.name')
                                       .includes(:category), 
                          :id, 
                          :full_name %>
  </div>

  <div class="field">
    <%= f.label :memo %>
    <%= f.text_field :memo %>
  </div>

  <div class="transfer-fields">
    <div class="field">
      <%= f.label :transfer_account_id, "Transfer To" %>
      <%= f.collection_select :transfer_account_id,
                            @current_budget.accounts,
                            :id,
                            :name,
                            { include_blank: true },
                            { class: 'transfer-account-select' } %>
    </div>
  </div>
</div>