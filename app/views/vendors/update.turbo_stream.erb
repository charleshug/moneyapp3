<%= turbo_stream.replace "vendors-list-content" do %>
  <%= render "list", vendors: @current_budget.vendors.not_transfer.order("LOWER(name)") %>
<% end %>

<%= turbo_stream.update "vendor-form-container" do %>
  <div class="flex items-center justify-center h-full text-green-500">
    <div class="text-center">
      <svg class="w-16 h-16 mx-auto mb-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
      <p class="text-lg font-medium">Vendor updated successfully!</p>
      <p class="text-sm text-gray-500 mt-2">Select another vendor to edit or create a new one</p>
    </div>
  </div>
<% end %>

<script>
  // Restore vendor selection after update
  setTimeout(() => {
    const vendorId = '<%= @vendor.id %>';
    const vendorItem = document.querySelector(`[data-vendor-id="${vendorId}"]`);
    if (vendorItem) {
      // Remove selection from all items
      document.querySelectorAll('.vendor-item').forEach(item => {
        item.classList.remove('bg-blue-100', 'border-blue-300', 'border-l-4');
        item.classList.add('hover:bg-blue-100');
      });
      // Add selection to the updated vendor
      vendorItem.classList.add('bg-blue-100', 'border-blue-300', 'border-l-4');
      vendorItem.classList.remove('hover:bg-blue-100');
    }
  }, 50);
</script>
