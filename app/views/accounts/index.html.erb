<% provide(:title, "Accounts") %>

<div class="bg-gray-100 rounded-lg shadow-md overflow-hidden flex flex-col h-[calc(100vh-120px)]">
  <!-- Header row -->
  <div class="bg-gray-800 py-3 px-4 flex justify-between items-center flex-shrink-0">
    <div class="w-1/3"></div>
    <h1 class="text-white text-xl font-bold w-1/3 text-center">Accounts</h1>
    <div class="w-1/3 text-right">
      <%= link_to "New", new_account_path, class: "bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm" %>
    </div>
  </div>
  
  <!-- Subheader with total amount -->
  <div class="bg-white py-3 px-4 mb-2 flex justify-between items-center flex-shrink-0">
    <h2 class="text-lg font-semibold">All Accounts</h2>
    <div>
      <%= number_to_currency((@balances[:total]/100.0), unit: "$", separator: ".", delimiter: ",") %>
    </div>
  </div>
  
  <div class="p-2 mb-2 overflow-y-auto flex-grow">
    <% @account_groups.each do |title, group| %>
      <%= render 'account_group', 
                 title: title, 
                 accounts: group[:accounts], 
                 balance: @balances[title], 
                 id: group[:id] %>
    <% end %>
  </div>
</div>

